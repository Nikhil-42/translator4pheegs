<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Home</title>
    <link rel="stylesheet" href="nicepage.css" media="screen"><link rel="stylesheet" href="index.css" media="screen">
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="index">
    <meta property="og:type" content="website">
    <link rel="canonical" href="/">
    <style>
      textarea {
        font-family: inherit;
        width: 100%;
        height: 25vh;
        resize: none;
        border: 0px;
      }
      button {
        font-family: inherit;
        border: 0px;
        border-radius: 0px;
        padding: 2vw;
        width: 100%;
        transition-duration: 0.4s;
      }
      .layout {
        display: grid;
        font-family: Georgia;
      }
      .clear {
        background-color: rgb(211, 105, 102);
      }
      .clear:hover {
        background-color: red;
      }
      .copy {
        background-color: rgb(67, 206, 62);
      }
      .copy:hover {
        background-color: green;
      }
    </style>
  </head>
  <body data-home-page="https://website1614692.nicepage.io/Home.html?version=6b31ae9b-31b6-44a7-b837-4b963051f601" data-home-page-title="Home" class="u-body u-xl-mode"><header class="u-clearfix u-header u-header" id="sec-ddcf"><div class="u-align-center u-clearfix u-sheet u-sheet-1">
        <h3 class="u-headline u-text u-text-default u-text-1" style="font-family: Georgia; font-size:3.25vw;">TTATACAATAGCTAGAGAAATTTAAGGTAC 4 TAAACAATTATTATGTAG</h3>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-8ed7">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-expanded-width u-list u-list-1">
          <div class="u-repeater u-repeater-1">
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-top u-container-layout-1">
                <div class="u-clearfix u-custom-html u-custom-html-1">
                  <div class="layout">
                    <textarea id="plaintext" placeholder="plaintext..." oninput="convert(1)" style="grid-row: 1; grid-column: 1 / 3;"></textarea>
                    <button onclick="copy('plaintext')" class="copy" style="grid-row: 2; grid-column: 1;">Copy</button>
                    <button onclick="wipe('plaintext')" class="clear" style="grid-row: 2; grid-column: 2;">Clear</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-valign-top u-container-layout-2">
                <div class="u-clearfix u-custom-html u-custom-html-2">
                  <div class="layout">
                    <textarea id="ciphertext" placeholder="AagActTaaAcaAttTacTtaAttTcaTta..." oninput="convert(-1)" style="grid-row: 1; grid-column: 1 / 3;"></textarea>
                    <button onclick="copy('ciphertext')" class="copy" style="grid-row: 2; grid-column: 1;">Copy</button>
                    <button onclick="wipe('ciphertext')" class="clear" style="grid-row: 2; grid-column: 2;">Clear</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </body>

  <script>
    plaintext_area = document.getElementById("plaintext");
    ciphertext_area = document.getElementById("ciphertext");
    last_plaintext = plaintext_area.value;
    last_ciphertext = ciphertext_area.value;

    base = {"0": "A", "1": "T", "2": "C", "3": "G"};

    encoder = {
      "a": "Aat", "b": "Aac", "c": "Aag", "d": "Ata", "e": "Att", "f": "Atc", "g": "Atg", "h": "Aca", "i": "Act", "j": "Acc", "k": "Acg", "l": "Aga", "m": "Agt", "n": "Agc", "o": "Agg", "p": "Taa", "q": "Tat", "r": "Tac", "s": "Tag", "t": "Tta", "u": "Ttt", "v": "Ttc", "w": "Ttg", "x": "Tca", "y": "Tct", "z": "Tcc",
      "A": "AAT", "B": "AAC", "C": "AAG", "D": "ATA", "E": "ATT", "F": "ATC", "G": "ATG", "H": "ACA", "I": "ACT", "J": "ACC", "K": "ACG", "L": "AGA", "M": "AGT", "N": "AGC", "O": "AGG", "P": "TAA", "Q": "TAT", "R": "TAC", "S": "TAG", "T": "TTA", "U": "TTT", "V": "TTC", "W": "TTG", "X": "TCA", "Y": "TCT", "Z": "TCC",
      ".": "aaa", "?": "ttt", "!": "ccc", ",": "aat", "'": "aac", "#": "ggg",
    };

    encode = function(plaintext) {
      ciphertext = "";
      for (c in plaintext) {
        char = plaintext[c];
        if (char in encoder) {
          ciphertext += encoder[char];
        } else {
          ciphertext += plaintext[c];
        }
      }

      ciphertext = ciphertext.replace(
        /ggg\d+(?:(?:aat)\d+)*(?:(?:aaa)\d+)?/g,
        number_str => "ggg" + Number(number_str.substring(3).replace("aat", "").replace("aaa", ".")).toString(4).replace(/\d/g, n => base[n]).replace(".", "aaa")
      );

      return ciphertext;
    };

    decoder = {};
    for (plaintext in encoder) {
      decoder[encoder[plaintext]] = plaintext;
    }

    debase = {};
    for (num in base) {
      debase[base[num]] = num;
    }

    decode = function(ciphertext) {

      ciphertext = ciphertext.replace(
        /ggg[ATCG]+(?:(?:aat)[ATCG]+)*(?:(?:aaa)[ATCG]+)?/g,
        number_str => {halves = number_str.substring(3).replace(/[ATCG]/g, n => debase[n]).replace("aaa", ".").split("."); return "#" + (parseInt(halves[0], 4) + (halves.length == 2 ? (parseInt(halves[1], 4) / 4**halves[1].length) : 0));}
      );

      plaintext = "";
      for (c = 0; c < ciphertext.length;) {
        char = ciphertext.substring(c, c + 3);
        if (char in decoder) {
          plaintext += decoder[char];
          c += 3;
        } else {
          plaintext += ciphertext[c];
          c += 1;
        }
      }

      return plaintext;
    };

    convert = function(opt) {
      if (opt==1 || (opt==0 && plaintext_area.value != last_plaintext)) {
        ciphertext_area.value = encode(plaintext_area.value);
      } else if (opt==-1 || (opt==0 && ciphertext_area.value != last_ciphertext)) {
        plaintext_area.value = decode(ciphertext_area.value);
      }
      last_ciphertext = ciphertext_area.value;
      last_plaintext = plaintext_area.value;
    };

    wipe = function(id) {
      document.getElementById(id).value = "";
      convert(0);
    };

    copy = function(id) {
      navigator.clipboard.writeText(document.getElementById(id).value);
    }
  </script>
</html>
