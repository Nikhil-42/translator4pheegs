<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      body {text-align: center;}
      h1 {font-family: Georgia; font-size: 3vw;}
      div {font-family: Georgia; font-size: 1.5vw}
      textarea {width: 100%; font-family: Georgia; font-size: 1vw;}
    </style>
    <title>TTATacAatAgcTagAgaAatTtaAggTac4TAAAcaAttAttAtgTag</title>
  </head>
  <body style="background-color:lavender;">
    <main>
      <h1>TTATacAatAgcTagAgaAatTtaAggTac<br>4<br>TAAAcaAttAttAtgTag</h1>
      <div>TaaAgaAatActAgcTtaAttTcaTta</div>
      <textarea id="plaintext" onkeyup="convert(1)"></textarea><br>
      <br>
      <div>AagActTaaAcaAttTacTtaAttTcaTta</div>
      <textarea id="ciphertext" onkeyup="convert(-1)"></textarea>
    </main>
  </body>
  <script>
    plaintext_area = document.getElementById("plaintext");
    ciphertext_area = document.getElementById("ciphertext");
    last_plaintext = plaintext_area.value;
    last_ciphertext = ciphertext_area.value;

    encoder = {
      "a": "Aat",
      "b": "Aac",
      "c": "Aag",
      "d": "Ata",
      "e": "Att",
      "f": "Atc",
      "g": "Atg",
      "h": "Aca",
      "i": "Act",
      "j": "Acc",
      "k": "Acg",
      "l": "Aga",
      "m": "Agt",
      "n": "Agc",
      "o": "Agg",
      "p": "Taa",
      "q": "Tat",
      "r": "Tac",
      "s": "Tag",
      "t": "Tta",
      "u": "Ttt",
      "v": "Ttc",
      "w": "Ttg",
      "x": "Tca",
      "y": "Tct",
      "z": "Tcc"
    }

    decoder = {
      "aat": "a",
      "aac": "b",
      "aag": "c",
      "ata": "d",
      "att": "e",
      "atc": "f",
      "atg": "g",
      "aca": "h",
      "act": "i",
      "acc": "j",
      "acg": "k",
      "aga": "l",
      "agt": "m",
      "agc": "n",
      "agg": "o",
      "taa": "p",
      "tat": "q",
      "tac": "r",
      "tag": "s",
      "tta": "t",
      "ttt": "u",
      "ttc": "v",
      "ttg": "w",
      "tgt": "w",
      "tca": "x",
      "tct": "y",
      "tcc": "z"
    }

    encode = function(plaintext) {
      ciphertext = "";
      input = plaintext;
      plaintext = plaintext.toLowerCase();
      for (c in plaintext) {
        char = plaintext[c];
        if (char in encoder) {
          if (input[c] == char) {
            ciphertext += encoder[char];
          } else {
            ciphertext += encoder[char].toUpperCase();
          }
        } else {
          ciphertext += char;
        }
      }
      return ciphertext;
    };

    decode = function(ciphertext) {
      plaintext = "";
      input = ciphertext;
      ciphertext = ciphertext.toLowerCase();
      for (c = 0; c < ciphertext.length;) {
        char = ciphertext.substring(c, c + 3);
        if (char in decoder) {
          if (input[c+1] == ciphertext[c+1]) {
            plaintext += decoder[char];
          } else {
            plaintext += decoder[char].toUpperCase();
          }
          c += 3;
        } else {
          plaintext += ciphertext[c];
          c += 1;
        }
      }
      return plaintext;
    };

    convert = function(opt) {
      if (opt==1 || (opt==0 && plaintext_area.value != last_plaintext)) {
        ciphertext_area.value = encode(plaintext_area.value);
      } else if (opt==-1 || (opt==0 && ciphertext_area.value != last_ciphertext)) {
        plaintext_area.value = decode(ciphertext_area.value);
      }
      last_ciphertext = ciphertext_area.value;
      last_plaintext = plaintext_area.value;
    };
  </script>
</html>
